{% extends 'base.html.twig' %}

{% block title %}Notes
{% endblock %}

{% block body %}
	<div class="note-list">
		<div class="notes-header">
			<a href="{{ path('note_create') }}" class="btn btn-primary">Maak een nieuwe notitie</a>
		</div>
		{% for note in notes %}

			<div class="note-card">
				<h5>{{ note.title }}</h5>
				<div class="note-meta">
					{{ note.created_at|date('Y-m-d H:i') }}
					|
					{{ note.category|join(', ') }}
					{% if note.user == app.user or is_granted('ROLE_ADMIN') %}
						<form method="post" action="{{ path('note_delete', {'id': note.id}) }}" class="d-inline">
							<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ note.id) }}">
							<div class="note-actions">
								{% if note.user == app.user or is_granted('ROLE_ADMIN') %}
									<a href="{{ path('note_edit', {'id': note.id}) }}" class="btn btn-warning btn-sm">Bewerken</a>
								{% endif %}
								<button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Weet je zeker dat je deze notitie wilt verwijderen?')">
									Verwijderen
								</button>
							</div>

						</form>
					{% endif %}
				</div>
				<div class="note-content">

					{{ note.getFormattedContent()|raw }}</div>

				<div class="note-actions">

					<a href="{{ path('note_get', {'id': note.id}) }}" class="btn btn-info btn-sm">Bekijken</a>
				</div>
			</div>

		{% else %}
			<div class="alert alert-info">Geen notities gevonden</div>

		{% endfor %}

	</div>
{% endblock %}
